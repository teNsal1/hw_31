{% extends 'base.html' %}
{% load static %}

{% block title %}Спасибо! | {{ block.super }}{% endblock %}

{% block content %}
<div class="text-center py-5">
    <h1 class="display-4 text-success mb-4">
        <i class="bi bi-check-circle-fill"></i> Спасибо!
    </h1>

    {% if request.GET.source == 'review' %}
        <p class="lead">Ваш отзыв успешно отправлен!</p>
        <p>После модерации он будет опубликован на сайте.</p>
    {% elif request.GET.source == 'order' %}
        <p class="lead">Ваша заявка успешно отправлена!</p>
        <p>Мы свяжемся с вами в ближайшее время для подтверждения записи.</p>
    {% else %}
        <p class="lead">Спасибо за обратную связь!</p>
    {% endif %}

    <a href="{% url 'landing' %}" class="btn btn-primary mt-3">
        Вернуться на главную
    </a>
    
    <div class="mt-5">
        <p>Автоматический переход через <span id="countdown">10</span> секунд...</p>
    </div>
</div>
{% endblock %}

{% block scripts %}
{{ block.super }}
<script>
    // Обратный отсчёт
    let seconds = 10;
    const countdownElement = document.getElementById('countdown');
    
    const countdown = setInterval(() => {
        seconds--;
        countdownElement.textContent = seconds;
        
        if (seconds <= 0) {
            clearInterval(countdown);
            window.location.href = "{% url 'landing' %}";
        }
    }, 1000);
</script>
{% endblock %}